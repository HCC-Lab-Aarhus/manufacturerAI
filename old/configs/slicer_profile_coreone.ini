# PrusaSlicer CLI overrides — Prusa Core One+ HF0.4
# Applied on top of the built-in "0.20mm BALANCED @COREONE HF0.4" profile.
# Generated by ManufacturerAI — edit freely.

# --- Output format ---
# Force ASCII G-code so our postprocessor can do text manipulation.
# The pipeline converts the staged .gcode → .bgcode afterwards,
# so the printer receives native binary G-code with no warnings.
binary_gcode = 0

# --- Settings IDs (must match built-in profile names) ---
printer_settings_id = Prusa CORE One HF0.4 nozzle
print_settings_id = 0.20mm BALANCED @COREONE HF0.4
filament_settings_id = Prusament PLA @COREONE HF0.4

# --- Thumbnails (displayed on the Core One screen) ---
thumbnails = 16x16/PNG, 220x124/PNG
thumbnails_format = PNG

# --- Infill ---
fill_density = 5%

# --- Support ---
# Disabled: the enclosure geometry prints cleanly without supports.
# PrusaSlicer handles overhangs via bridging and overhang perimeters.
support_material = 0

# --- Travel improvements ---
# Wipe nozzle before retraction to reduce ooze blob
wipe = 1
# Route travel moves around already-printed perimeters
# (prevents nozzle from scraping across printed surfaces)
avoid_crossing_perimeters = 1
# Limit detour to 3× direct distance — prevents excessively long
# travel paths around pinholes that increase ooze time.
avoid_crossing_perimeters_max_detour = 3
# Align Z-seam so layer start/stop blobs form a single
# line instead of random dots across the surface
seam_position = aligned
# Disable travel ramping (diagonal Z-ramp); use a clean Z-hop instead
# so the nozzle lifts before traveling and doesn't drag across the surface
travel_ramping_lift = 0
filament_travel_ramping_lift = 0
# --- Retraction ---
# Use Prusa's factory defaults for retraction distance and speed.
# The Core One HF 0.4 has a short melt zone with active heat-break
# cooling (M142 S36).  The built-in profile uses ~0.8mm retraction
# which is tuned for this geometry.  Overriding to 2.0mm caused
# semi-molten filament to be pulled into the cold zone → clogging.

# --- Temperature ---
# The built-in "Prusament PLA @COREONE HF0.4" profile defaults to 230 °C.
# 225 °C is a compromise: low enough to reduce ooze vs 230, but high
# enough to fully melt filament in the HF nozzle's large melt zone.
# 215 °C caused clogs — the stiffer melt couldn't re-flow after retraction.
temperature = 225
first_layer_temperature = 225
filament_first_layer_temperature = 225
filament_temperature = 225

# --- Retraction refinements ---
# Retract 70 % of the distance *before* the wipe move so the full
# retraction completes even if the wipe path is short.  Without this,
# short wipes leave partial retraction → net positive E accumulation.
retract_before_wipe = 70%
filament_retract_before_wipe = 70%
# Retract on short travels too — reduces stringing around pinholes.
retract_before_travel = 0.8

# --- Ironing ---
ironing = 1
ironing_type = top
ironing_flowrate = 15%
ironing_speed = 15
ironing_spacing = 0.1
